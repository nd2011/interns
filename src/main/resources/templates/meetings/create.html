<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<style>
    body, section, form, label, input, button, p, div {
      color: #000000 !important;
    }
    input::placeholder {
      color: #666666 !important;
    }
</style>
<head>
    <meta charset="UTF-8">
    <title>Tạo cuộc họp mới</title>
    <link rel="stylesheet" href="/css/meetings-style.css">
</head>
<body>
<section>
    <form action="/meetings/create" method="post" th:object="${meeting}" autocomplete="off">
        <h1 style="color: #007bff;">Tạo cuộc họp mới</h1>
        <div class="inputbox">
            <input type="text" id="title" name="title" th:field="*{title}" required placeholder=" ">
            <label for="title">Tiêu đề</label>
        </div>
        <div class="inputbox">
            <input type="text" id="description" name="description" th:field="*{description}" required placeholder=" ">
            <label for="description">Mô tả</label>
        </div>
        <div class="inputbox">
            <input type="datetime-local" id="startTime" name="startTime" th:field="*{startTime}" required placeholder=" ">
            <label for="startTime">Thời gian bắt đầu</label>
        </div>
        <div class="inputbox">
            <input type="datetime-local" id="endTime" name="endTime" th:field="*{endTime}" required placeholder=" ">
            <label for="endTime">Thời gian kết thúc</label>
        </div>
        <div style="margin:20px 0 0 0; color:#fff;">
            <label for="searchUser" style="font-size: 1rem;">Chọn người tham gia:</label>
            <input type="text" id="searchUser" placeholder="Tìm người..." onkeyup="filterUsers()" style="width:100%; padding:8px; border-radius:8px; margin:8px 0;">
            <div id="userList" style="max-height:120px; overflow-y:auto; background:rgba(255,255,255,0.1); border-radius:12px; border:1px solid #eee; padding:10px;">
                <div th:each="user : ${users}" th:id="${'userDiv_'+user.id}" style="margin-bottom:4px;">
                    <input type="checkbox" th:id="${'user_'+user.id}" name="participantIds" th:value="${user.id}">
                    <label th:for="${'user_'+user.id}" th:text="${user.username}" style="color: #fff;">Tên user</label>
                </div>
            </div>
        </div>
        <button type="submit" class="btn-add">Tạo cuộc họp</button>
        <div class="register" style="margin-top:14px;">
            <p><a href="/meetings">Quay lại danh sách</a></p>
        </div>
    </form>
</section>
<script>
    function filterUsers() {
        var input = document.getElementById('searchUser');
        var filter = input.value.toUpperCase();
        var container = document.getElementById('userList');
        var divs = container.getElementsByTagName('div');
        for (var i = 0; i < divs.length; i++) {
            var label = divs[i].getElementsByTagName("label")[0];
            if (label) {
                var txtValue = label.textContent || label.innerText;
                divs[i].style.display = txtValue.toUpperCase().indexOf(filter) > -1 ? "" : "none";
            }
        }
    }
</script>
</body>
</html>
